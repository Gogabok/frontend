@import "~themes/_variables"

$minHeight = 500px
$minWidth = 310px
$backgroundPatternSize = 120px
$borderRadius = 15px
$headerGradientHeight = 300px
$headerHeight = 60px
$videoBackgroundBlur = 10px
$controlButtonSize = {
  desktop: 60px
  mobile: 75px
}
$messageContainerMaxWidth = 270px
$avatarSize = 100px


.call
  position: absolute
  top: ($vSpacing * 0.5)
  right: ($hSpacing * 0.5)
  width: $minWidth
  height: $minHeight
  border: 1px solid var(--gray)
  border-radius: $borderRadius
  overflow: hidden
  z-index: 3001
  box-shadow: 0 0 $hSpacing ($hSpacing * 0.5) rgba(0, 0, 0, 0.1)
  user-select: none
  background-color: var(--lightgray)
  background-repeat: no-repeat;
  background-position: center

  &::before
    position: absolute
    right: 0
    top: 0
    bottom: 0
    left: 0
    background: var(--call-overlay-background-color)

  &__avatar
    width: 100%
    height: 100%
    object-fit: cover
    object-position: center center

    &-container
      position: absolute
      left: 0
      top: 0
      right: 0
      bottom: 0
      display: grid
      grid-template-columns: repeat(2, 1fr)

  &__info
    display: flex
    flex-direction: column
    align-items: center
    justify-content: flex-start
    position: absolute
    top: ($vSpacing * 6)
    right: 0
    left: 0
    padding: ($vSpacing * 2) ($hSpacing * 2)
    z-index: 2

    &--from
      margin-bottom: ($vSpacing * 1.5)
      font-size: calc(var(--smallFont) * 2)
      color: var(--white)
      text-align: center
      line-height: 1.21

    &--members-amount
      color: var(--white) !important
      font-size: var(--largeFont)
      margin-top: $vSpacing

  &__header
    padding: 0 $hSpacing
    height: $headerHeight
    display: flex
    align-items: center
    justify-content: center
    position: absolute
    top: 0
    right: 0
    left: 0
    z-index: 1
    margin-bottom: ($vSpacing * 1.5)
    font-size: var(--largeFont)
    color: var(--white)
    text-align: center
    line-height: 1.21

  &__controls
    display: flex
    align-items: center
    justify-content: space-around
    position: absolute
    right: 0
    bottom: ($vSpacing * 2)
    left: 0

    &-item
      display: flex
      flex-direction: column
      align-items: center

      &--icon
        display: flex
        justify-content: center
        align-items: center
        position: relative
        width: $controlButtonSize.desktop
        height: @width
        margin: 0 $hSpacing
        overflow: hidden
        border: 1px solid var(--graydarker)
        border-radius: 100%
        background: var(--lightgray)
        cursor: pointer
        transition: all .2s ease-out

        svg
          height: round($iconSize * 1.227)

        &.message
          border-color: var(--call-controls-border-color)

        &.accept
        &.decline
          svg
            fill: var(--white)
            stroke: var(--white)

        &.accept
          border-color: var(--accept-call-button-border-color)
          background: var(--accept-call-button-background-color)

        &.decline
          border-color: var(--decline-call-button-border-color)
          background: var(--decline-call-button-background-color)

          svg
            transform: rotateY(180deg)


      &--text
        color: var(--white)
        text-align: center
        font-size: var(--regularSubFont)
        margin-top: ($vSpacing * 0.5)




  &__message
    padding: 0 ($hSpacing * 0.6)
    transition: 0.2s ease-in-out background-color,
                  0.2s ease-in-out color

    &:hover
      cursor: pointer
      background-color: var(--darksilver)
      color: var(--white)

    &:last-child
      border-bottom: none

    &--text
      display: block
      padding: ($vSpacing * 1.3) ($hSpacing * 2)
      border-bottom: 1px solid var(--gray)
      width: 100%
      height: 100%


    &--container
      display: flex
      flex-direction: column
      position: absolute
      bottom: ($vSpacing * 10)
      left: 50%
      width: 100%
      max-width: $messageContainerMaxWidth
      border-radius: round($borderRadius * 0.33)
      overflow: hidden
      z-index: 3
      transform: translateX(-50%)
      background: var(--lightgray)



.is-mobile
  .call
    top: 0
    right: 0
    bottom: 0
    width: 100%
    height: 100%
    border: none
    border-radius: 0
    box-shadow: none

    &__message
      bottom: ($vSpacing * 13)


@keyframes dot-keyframes
  0%
    opacity: 1

  30%
    opacity: 0

  60%
    opacity: 1
